
---
# Real memory management mechanisms

[Back to index](../index.md)

---
## Introduction
### Ways to Manage Memory
- **Real memory**
	- Whole process is loaded to MM.
	- Low multiprogramming.
	- Can be contiguous allocated or not.
- **Virtual memory**
	- Processes are partially loaded to MM.
	- Higher multiprogramming.
	- Uses secondary memory as backup.
### Historical Evolution
1. Real memory
	1. Contiguous Allocation
		1. Single-process monitor
		2. Multi-programmed systems
			1. With fixed partitions
			2. With dynamic partitions
	2. Non-contiguous allocation
		1. Simple paging
		2. Simple segmentation
		3. Paged segmentation
2. Virtual memory
	1. Paging on-demand
	2. Segmentation on-demand
	3. Paged segmentation.

---
## Contiguous memory allocation
### Singe-process monitor (OS)
#### Physical organization of the MM
- OS present at lower positions
- The only process is stored before the OS in the transient area.
- Processes life cycle: One stops -> It is removed -> Load another.
#### Protection
- Base register contains the initial physical address of the process in MM.
- Limit register contains the process size (in bytes).
- Process cannot access any logical address greater than the limit register.
- Every address generated by the CPU is checked.
#### Translation Steps (Dynamic translation)
1. We have a logical address generated by the CPU.
2. Protection:  $\text{Logical address} > \text{Limit register} \implies \text{Exception}$
3. Translation: $\text{Logical address} + \text{Base register} = \text{Physical Address}$
4. We have a physical address to access the MM.

### Multi-processing with fixed partitions
#### Physical organization of the MM
- MM is divided into pieces called partitions.
	- Partitions have a fixed size but not necessarily the same.
- The partition 0 is assigned to the OS.
- Each process is inside a partition that is bigger that them (waste of MM).
- If no partition is free processes must wait (suspended) or replace another one.
#### Data Structure
- A partition table is required.
	- State (free/used), Partition base, Partition size.
- A queue for processes to access the MM is required.
	- Can have one single input queue or one per petition.
#### Assignment Strategies
(One partition, one process. Only partition bigger than the process are electable)
- **First-fit** (First available partition starting from the first one)
- **Next-fit** (First available partition starting from the last assigned one)
- **Best-fit** (Available partition with less free space)

#### Protection & Translation Steps
- Same as in single-process monitor.

### Multi-processing dynamic fixed partitions
#### Physical organization of the MM
- MM is divided into partitions and free spaces called hollows
- Initially there is only the OS partition and a big hollow.
- Each process:
	- Creates a new partition as big as the process.
	- Starts at the first available and big enough hollow.
	- Partition is erased on process finishing.
- Note that partitions cannot move as they hold a running process.
- It suffers from fragmentation.
	- Is the wasted space of the small hollows in between partitions.
	- Hollow condensation: Join adjacent hollows when freeing a process.
	- Compaction: Move process to have always only one big hollow.
#### Data Structures
- A list of partitions and hollows is required (Can be joined os separated).
- For each hollow we have a initial physical address and its size in bytes.
- For the partitions we also have the PID.
#### Assignment Strategies, Protection & Translation Steps
- Same as in multi-processing with fixed partitions.

---
## Non-contiguous memory allocation (pg 64)
### Simple paging

### Simple segmentation

### Paged segmentation


---